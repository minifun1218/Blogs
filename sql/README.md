# ä¸ªäººåšå®¢ç³»ç»Ÿæ•°æ®åº“è„šæœ¬

æœ¬ç›®å½•åŒ…å«äº†ä¸ªäººåšå®¢ç³»ç»Ÿçš„å®Œæ•´æ•°æ®åº“åˆ›å»ºå’Œåˆå§‹åŒ–è„šæœ¬ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### 1. `create_tables.sql` - æ•°æ®åº“è¡¨åˆ›å»ºè„šæœ¬
- åˆ›å»ºæ‰€æœ‰14ä¸ªæ•°æ®åº“è¡¨
- åŒ…å«å®Œæ•´çš„å­—æ®µå®šä¹‰ã€ç´¢å¼•ã€å¤–é”®çº¦æŸ
- åŒ…å«è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹
- åŒ…å«åŸºç¡€é…ç½®æ•°æ®

### 2. `init_data.sql` - åˆå§‹åŒ–æ•°æ®è„šæœ¬
- åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·
- æ’å…¥ç¤ºä¾‹æ–‡ç« å’Œè¯„è®º
- åˆå§‹åŒ–ç³»ç»Ÿé…ç½®
- åˆ›å»ºæµ‹è¯•æ•°æ®

### 3. `optimize_indexes.sql` - ç´¢å¼•ä¼˜åŒ–è„šæœ¬
- æ€§èƒ½ä¼˜åŒ–ç´¢å¼•
- å¤åˆç´¢å¼•åˆ›å»º
- åˆ†åŒºè¡¨å»ºè®®
- æ€§èƒ½ç›‘æ§æŸ¥è¯¢

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šæŒ‰é¡ºåºæ‰§è¡Œï¼ˆæ¨èï¼‰

```bash
# 1. è¿æ¥åˆ°MySQL
mysql -u root -p

# 2. æ‰§è¡Œè¡¨åˆ›å»ºè„šæœ¬
source /path/to/sql/create_tables.sql

# 3. æ‰§è¡Œåˆå§‹åŒ–æ•°æ®è„šæœ¬
source /path/to/sql/init_data.sql

# 4. æ‰§è¡Œç´¢å¼•ä¼˜åŒ–è„šæœ¬ï¼ˆå¯é€‰ï¼‰
source /path/to/sql/optimize_indexes.sql
```

### æ–¹æ³•äºŒï¼šä¸€æ¬¡æ€§æ‰§è¡Œ

```bash
# åˆå¹¶æ‰§è¡Œæ‰€æœ‰è„šæœ¬
cat create_tables.sql init_data.sql optimize_indexes.sql | mysql -u root -p
```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨MySQL Workbench
1. æ‰“å¼€MySQL Workbench
2. è¿æ¥åˆ°æ•°æ®åº“
3. ä¾æ¬¡æ‰“å¼€å¹¶æ‰§è¡ŒSQLæ–‡ä»¶

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

### æ ¸å¿ƒä¸šåŠ¡è¡¨
- `tb_user` - ç”¨æˆ·è¡¨
- `tb_post` - æ–‡ç« è¡¨
- `tb_comment` - è¯„è®ºè¡¨
- `tb_category` - åˆ†ç±»è¡¨
- `tb_tag` - æ ‡ç­¾è¡¨

### å…³è”å…³ç³»è¡¨
- `tb_user_role` - ç”¨æˆ·è§’è‰²å…³è”
- `tb_post_tag` - æ–‡ç« æ ‡ç­¾å…³è”

### åŠŸèƒ½æ‰©å±•è¡¨
- `tb_file_upload` - æ–‡ä»¶ä¸Šä¼ è®°å½•
- `tb_coin` - ç§¯åˆ†è®°å½•
- `tb_user_coin` - ç”¨æˆ·ç§¯åˆ†æ±‡æ€»
- `tb_like_record` - ç‚¹èµè®°å½•

### ç³»ç»Ÿç®¡ç†è¡¨
- `tb_role` - è§’è‰²è¡¨
- `tb_admin_log` - ç®¡ç†å‘˜æ—¥å¿—
- `tb_system_config` - ç³»ç»Ÿé…ç½®

## ğŸ” é»˜è®¤è´¦æˆ·ä¿¡æ¯

### ç®¡ç†å‘˜è´¦æˆ·
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`
- **é‚®ç®±**: `admin@example.com`
- **è§’è‰²**: è¶…çº§ç®¡ç†å‘˜

### æµ‹è¯•è´¦æˆ·
- **ç”¨æˆ·å**: `testuser`
- **å¯†ç **: `user123`
- **é‚®ç®±**: `user@example.com`
- **è§’è‰²**: æ™®é€šç”¨æˆ·

> âš ï¸ **å®‰å…¨æé†’**: ç”Ÿäº§ç¯å¢ƒä¸­è¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ğŸ› ï¸ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®
- **æ•°æ®åº“å**: `mydb`
- **å­—ç¬¦é›†**: `utf8mb4`
- **æ’åºè§„åˆ™**: `utf8mb4_unicode_ci`
- **å­˜å‚¨å¼•æ“**: `InnoDB`

### ç³»ç»Ÿé…ç½®é¡¹
è„šæœ¬ä¼šè‡ªåŠ¨æ’å…¥ä»¥ä¸‹ç³»ç»Ÿé…ç½®ï¼š
- ç½‘ç«™åŸºæœ¬ä¿¡æ¯
- æ–‡ä»¶ä¸Šä¼ é™åˆ¶
- ç§¯åˆ†å¥–åŠ±è§„åˆ™
- è¯„è®ºå®¡æ ¸è®¾ç½®

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²åˆ›å»ºçš„ç´¢å¼•
- ä¸»é”®ç´¢å¼•ï¼ˆè‡ªåŠ¨ï¼‰
- å”¯ä¸€é”®ç´¢å¼•
- å¤–é”®ç´¢å¼•
- å¤åˆæŸ¥è¯¢ç´¢å¼•
- å…¨æ–‡æœç´¢ç´¢å¼•

### ä¼˜åŒ–å»ºè®®
1. **å®šæœŸç»´æŠ¤**: è¿è¡Œ `OPTIMIZE TABLE` å‘½ä»¤
2. **ç›‘æ§æ…¢æŸ¥è¯¢**: å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—
3. **åˆ†ææ‰§è¡Œè®¡åˆ’**: ä½¿ç”¨ `EXPLAIN` åˆ†ææŸ¥è¯¢
4. **é€‚å½“åˆ†åŒº**: å¤§æ•°æ®é‡æ—¶è€ƒè™‘è¡¨åˆ†åŒº

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. å­—ç¬¦é›†é—®é¢˜
```sql
-- æ£€æŸ¥å­—ç¬¦é›†
SHOW VARIABLES LIKE 'character_set%';

-- ä¿®æ”¹å­—ç¬¦é›†
ALTER DATABASE mydb CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### 2. å¤–é”®çº¦æŸé”™è¯¯
```sql
-- ä¸´æ—¶ç¦ç”¨å¤–é”®æ£€æŸ¥
SET FOREIGN_KEY_CHECKS = 0;
-- æ‰§è¡ŒSQL
-- é‡æ–°å¯ç”¨å¤–é”®æ£€æŸ¥
SET FOREIGN_KEY_CHECKS = 1;
```

#### 3. æƒé™é—®é¢˜
```sql
-- åˆ›å»ºæ•°æ®åº“ç”¨æˆ·
CREATE USER 'blog_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON mydb.* TO 'blog_user'@'localhost';
FLUSH PRIVILEGES;
```

## ğŸ“ ç»´æŠ¤å»ºè®®

### å®šæœŸç»´æŠ¤ä»»åŠ¡
1. **å¤‡ä»½æ•°æ®åº“**
   ```bash
   mysqldump -u root -p mydb > backup_$(date +%Y%m%d).sql
   ```

2. **æ¸…ç†æ—¥å¿—æ•°æ®**
   ```sql
   -- æ¸…ç†30å¤©å‰çš„æ—¥å¿—
   DELETE FROM tb_admin_log WHERE create_time < DATE_SUB(NOW(), INTERVAL 30 DAY);
   ```

3. **æ›´æ–°ç»Ÿè®¡ä¿¡æ¯**
   ```sql
   ANALYZE TABLE tb_post, tb_comment, tb_user;
   ```

### ç›‘æ§æŒ‡æ ‡
- è¡¨å¤§å°å’Œè¡Œæ•°
- ç´¢å¼•ä½¿ç”¨ç‡
- æ…¢æŸ¥è¯¢æ•°é‡
- è¿æ¥æ•°å’Œå¹¶å‘é‡

## ğŸ”„ ç‰ˆæœ¬å‡çº§

å¦‚éœ€å‡çº§æ•°æ®åº“ç»“æ„ï¼Œè¯·ï¼š
1. å¤‡ä»½ç°æœ‰æ•°æ®
2. æµ‹è¯•å‡çº§è„šæœ¬
3. åœ¨ç»´æŠ¤çª—å£æ‰§è¡Œ
4. éªŒè¯æ•°æ®å®Œæ•´æ€§

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. MySQLç‰ˆæœ¬å…¼å®¹æ€§ï¼ˆæ¨è8.0+ï¼‰
2. ç”¨æˆ·æƒé™è®¾ç½®
3. ç³»ç»Ÿèµ„æºï¼ˆå†…å­˜ã€ç£ç›˜ç©ºé—´ï¼‰
4. é”™è¯¯æ—¥å¿—ä¿¡æ¯

---

**æ³¨æ„**: è¯·åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰å……åˆ†æµ‹è¯•æ‰€æœ‰è„šæœ¬ï¼
